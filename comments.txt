16.10.2024
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, –¥–æ—Ä–æ–≥–æ–π —Ä–µ–≤—å—é–µ—Ä!

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞: "dds_service" –∏ "cdm_service". –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å–µ—Ä–≤–∏—Å "stg_service" –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Å–ø—Ä–∏–Ω—Ç–∞. 

–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö –¥–æ—Å—Ç–∞–≤–∫–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö. 

–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤:
1. stg_service: –≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –æ–±–æ–≥–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ "dds_service" –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ —Ç–æ–ø–∏–∫ "stg-service-orders".
2. dds_service: –ü–æ–ª—É—á–∞–µ—Ç –≤—ã—Ö–æ–¥–Ω—ã–µ –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç "stg_service", –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Ö –≤ DWH —Å–ª–æ–π DDS –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–æ–ø–∏–∫ Kafka "dds-service-orders".
3. cdm_service: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É, –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Kafka –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Ö –≤ DWH –≤ —Å–ª–æ–π CDM.

–ö–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤–æ–µ–º Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –û–±—Ä–∞–∑—ã –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ "de-registry" –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –≤ Kubernetes.

–í —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞, –∞ –∏–º–µ–Ω–Ω–æ –æ—à–∏–±–∫–∞ –≤ PostgreSQL, –≤—ã–≥–ª—è–¥–∏—Ç –æ–Ω–∞ —Ç–∞–∫:
{
application_name: "unknown - 84.252.147.254",
backend_type: "client backend",
command_tag: "idle in transaction",
connection_from: "localhost:33366",
context: "",
database_name: "sprint9dwh",
detail: "",
error_severity: "ERROR",
hint: "",
hostname: "rc1b-p400orx3336ft63b.mdb.yandexcloud.net",
internal_query: "",
internal_query_pos: 0,
leader_pid: 0,
location: "",
message: "syntax error at or near "sent_dttm"",
process_id: 154082,
query: " INSERT INTO stg.order_events (object_id, object_type, sent_dttm, payload) VALUES ('object_id', 'object_type', 'sent_dttm', 'payload') ON CONFLICT (object_id) DO UPDATE SET object_type = EXCLUDED.object_type sent_dttm = EXCLUDED.sent_dttm payload = EXCLUDED.payload ",
query_id: 0,
query_pos: 361,
session_id: "670fd4cd.259e2",
session_line_num: 1,
session_start_time: "2024-10-16T17:59:25+03:00",
sql_state_code: 42601,
transaction_id: 0,
user_name: "db_user",
virtual_transaction_id: "5/48133"
}

–í–∏–¥–Ω–æ —á—Ç–æ –≤ –∫–æ–Ω—Ü–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∑–∞–ø—è—Ç—ã—Ö –∏ —è –¥—É–º–∞—é –ø—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –∏–∑ –∑–∞ –Ω–∏—Ö. –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç–æ, —á—Ç–æ –≤ –∫–æ–¥–µ —ç—Ç–∏ –∑–∞–ø—è—Ç—ã–µ –µ—Å—Ç—å. 
–ê —Å–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ: —á—Ç–æ –±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —ç—Ç–æ–π –æ—à–∏–±–∫–∏ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å —É–¥–∞–ª—è—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∑–∞–Ω–æ–≤–æ –∏—Ö –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –∏–Ω–æ–≥–¥–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –ø–æ–∫–∞ –ª–æ–≥–∏ –≤ PostgreSQL –Ω–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç –æ–∫—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –≤ –∫—Ä–∞—Å–Ω—ã–π.
–í –æ–±—â–µ–º, –Ω–∞–º—É—á–∞–ª—Å—è —è —Å —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π :-) 
–•–æ—Ç–µ–ª–æ—Å—å –±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —ç—Ç–∏–º, –Ω–æ –¥–µ–¥–ª–∞–π–Ω –ø–æ–¥–∂–∏–º–∞–µ—Ç...

18.10.2024
–°–≤–µ—Ç–ª–∞–Ω–∞, –ø—Ä–∏–≤–µ—Ç!üññ
–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–º–µ—á–µ–Ω–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è! –Ø –∏—Ö —É—á—ë–ª –∏ –∏—Å–ø—Ä–∞–≤–∏–ª!

"–í–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç"